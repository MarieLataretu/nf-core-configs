//Profile config names for nf-core/configs
params {
    config_profile_description = 'Generic RKI HPC profile provided by nf-core/configs.'
    config_profile_contact = 'Marie Lataretu (@MarieLataretu)'
    config_profile_url = 'https://www.rki.de/'
    conda_cache_dir = 'conda'
}

process {
    executor = 'slurm'
    cache = 'lenient'
}

executor {
    queueSize = 20
}

trace {
    fields = 'task_id,hash,workdir,native_id,name,tag,status,attempt,exit,submit,duration,realtime,%cpu,peak_rss,peak_vmem,rchar,wchar,container,module'
}

profiles {
    // To use singularity, use nextflow run -profile rki,singularity
    singularity {
        singularity {
            enabled = true
            autoMounts = true
            envWhitelist = "HTTPS_PROXY,HTTP_PROXY,http_proxy,https_proxy,FTP_PROXY,ftp_proxy"
        }
    }
    // To use conda, use nextflow run -profile rki,conda
    conda {
        conda {
            enabled = true
            cacheDir = params.conda_cache_dir
        }
    }
    // To use mamba, use nextflow run -profile rki,mamba
    mamba {
        conda {
            enabled = true
            useMamba = true
            cacheDir = params.conda_cache_dir
        }
    }
    // Use priority partition
    priority {
        process {
            clusterOptions = '--partition=priority'
        }
    }
}
